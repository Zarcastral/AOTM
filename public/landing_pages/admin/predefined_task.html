<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predefined Tasks</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="predefined_task.css">
</head>

<body>
    <!-- Header Section -->
    <div id="header-container"></div> <!-- This will hold the header content dynamically -->

    <div class="main-content">
        <!-- Buttons for Adding and Assigning Tasks -->
        <h2>Default Task</h2>

        <!-- Task List Section -->
        <div class="panel">
            <div class="btn-container">
                <button id="open-add-task-modal" class="text-add-btn"> + Add New Task</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Task Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="task-list">
                    <!-- Task rows will be populated dynamically -->
                </tbody>
            </table>
            <!-- Pagination Controls -->
            <div class="pagination-container">
                <button id="next-page-btn" class="pagination-btn" disabled>&gt;</button>
                <button id="prev-page-btn" class="pagination-btn">&lt;</button>
                <span id="page-info"></span>
            </div>
        </div>

        <!-- Add Task Modal -->
        <div id="add-task-modal" class="modal">
            <div class="modal-content">
                <span id="close-add-task-modal" class="close-btn">×</span>
                <h2>Add New Task</h2>
                <ul id="new-task-list" class="task-list"></ul>
                <div class="task-input-container">
                    <input type="text" id="new-task-input" placeholder="Enter task...">
                    <button id="add-task-btn" class="add-task-btn">Add Task</button>
                </div>
                <button id="save-tasks-btn" class="save-btn" disabled>Save</button>
            </div>
        </div>

        <!-- Edit Task Modal -->
        <div id="edit-task-modal" class="modal">
            <div class="modal-content">
                <span id="close-edit-task-modal" class="close-btn">×</span>
                <h2>Edit Task</h2>
                <ul id="subtask-list" class="task-list"></ul>
                <h2>Add SubTask</h2>
                <div class="task-input-container">
                    <input type="text" id="new-subtask-input" placeholder="Enter subtask...">
                    <button id="add-subtask-btn" class="add-task-btn"> + Add Subtask</button>
                </div>
                <button id="save-subtasks-btn" class="save-btn" disabled>Save</button>
            </div>
        </div>

        <!-- Duplicate Task Modal -->
        <div id="duplicate-task-modal" class="modal">
            <div class="modal-content">
                <h2>Task Already Exists</h2>
                <p id="duplicate-task-message"></p>
                <button id="close-duplicate-task-modal" class="add-user-btn">Okay</button>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="delete-confirmation-modal" class="modal">
            <div class="modal-content">
                <h2>Are you sure you want to delete this task?</h2>
                <p id="delete-confirmation-message"></p>
                <button id="confirm-delete-btn" class="dell1-user-btn">Yes, delete</button>
                <button id="cancel-delete-btn" class="dell-user-btn">Cancel</button>
            </div>
        </div>

        <!-- No Changes Warning Modal -->
        <div id="no-changes-modal" class="modal">
            <div class="modal-content">
                <h2>No Changes Made</h2>
                <p>No new tasks or modifications were detected.</p>
                <button id="close-no-changes-modal" class="add-user-btn">Okay</button>
            </div>
        </div>

        <!-- Assign Task to Crop Type Modal -->
        <div id="assign-task-modal" class="modal">
            <div class="modal-content">
                <span id="close-assign-task-modal" class="close-btn">×</span>
                <h2>Assign Tasks to Crop Type</h2>
                <label for="crop-type-select">Select Crop Type</label>
                <select id="crop-type-select">
                    <option value="">Select a crop type</option>
                    <!-- Crop types will be loaded dynamically -->
                </select>
                <h3>Select Tasks</h3>
                <div id="task-checkboxes">
                    <!-- Default tasks will be loaded dynamically as checkboxes -->
                </div>
                <button id="assign-tasks-btn" class="add-user-btn">Save</button>
            </div>
        </div>

        <h2>Assigned Tasks</h2>
        <!-- Assigned Tasks Table -->
        <div class="panel">
            <div class="btn-container">
                <button id="open-assign-task-modal" class="text-add-btn"> + Assign Tasks to Crop Type</button>
            </div>
            <div class="search-container">
                <label for="crop-filter"></label>
                <select id="crop-filter">
                    <option value="">Crops</option>
                </select>
                <label for="crop-type-filter"></label>
                <select id="crop-type-filter">
                    <option value="">Crop Types</option>
                </select>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Crop Name</th>
                        <th>Crop Type</th>
                        <th>Task Name</th>
                        <th>Assigned On</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="assigned-tasks-table-body">
                    <!-- Task rows will be populated dynamically -->
                </tbody>
            </table>
            <!-- Pagination Controls for Assigned Tasks -->
            <div class="pagination-container">
                <button id="assigned-next-page-btn" class="pagination-btn" disabled>&gt;</button>
                <button id="assigned-prev-page-btn" class="pagination-btn" disabled>&lt;</button>
                <span id="assigned-page-info"></span>
            </div>
        </div>

        <!-- Edit Subtasks Modal -->
        <div id="edit-subtasks-modal" class="modal">
            <div class="modal-content">
                <span class="close" id="close-edit-subtasks-modal">×</span>
                <h2>Edit Subtask</h2>
                <p id="edit-task-name-display"></p>
                <ul id="subtask-list-subtasks" class="task-list"></ul>
                <h2>Add SubTask</h2>
                <div class="task-input-container">
                    <input type="text" id="new-subtask-input-subtasks" placeholder="Enter subtask...">
                    <button id="add-subtask-btn-subtasks" class="add-task-btn"> + Add Subtask</button>
                </div>
                <button id="save-subtasks-btn-subtasks" class="save-btn" disabled>Save</button>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="success-modal" class="modal">
            <div class="modal-content">
                <h2>Success</h2>
                <p id="success-message"></p>
                <button id="close-success-modal" class="add-user-btn">Okay</button>
            </div>
        </div>

        <!-- Error Modal -->
        <div id="error-modal" class="modal">
            <div class="modal-content">
                <h2>Please Select A Crop Type</h2>
                <p id="error-message"></p>
                <button id="close-error-modal" class="add-user-btn">Okay</button>
            </div>
        </div>

        <!-- Warning Modal -->
        <div id="warning-modal" class="modal">
            <div class="modal-content">
                <h2>Warning</h2>
                <p id="warning-message"></p>
                <button id="close-warning-modal" class="add-user-btn">Okay</button>
            </div>
        </div>

        <!-- Info Modal -->
        <div id="info-modal" class="modal">
            <div class="modal-content">
                <h2>Information</h2>
                <p id="info-message"></p>
                <button id="close-info-modal" class="add-user-btn">Okay</button>
            </div>
        </div>

        <!-- Duplicate Tasks Modal -->
        <div id="duplicate-tasks-modal" class="modal">
            <div class="modal-content">
                <h2>Sub Task Already Assigned</h2>
                <p>The following sub tasks is/are already assigned to</p>
                <p id="duplicate-crop-type-name" style="font-weight: bold;"></p>
                <p id="duplicate-tasks-message"></p>
                <button id="close-duplicate-tasks-modal" class="add-user-btn">Okay</button>
            </div>
        </div>
    </div>

    <script type="module" src="predefined_task.js"></script>
    <!-- Import the reusable script from src/auth -->
    <script type="module" src="../../../src/auth/header.js"></script>
</body>

</html>