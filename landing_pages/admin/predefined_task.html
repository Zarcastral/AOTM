<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predefined Tasks</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/style/admin/predefined_task.css">
</head>

<body>
    <!-- Header Section -->
    <div id="header-container"></div> <!-- This will hold the header content dynamically -->

    <div class="main-content">
        <!-- Buttons for Adding and Assigning Tasks -->
        <div class="title">CURRENT TASK</div>

        <!-- Task List Section -->
        <div class="panel">
            <div class="btn-container">
                <button id="open-add-task-modal" class="text-add-btn"> + New Task</button>
            </div>

            <div class="search-container">
                <input type="text" id="search-bar" placeholder="Search" />
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Task Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="task-list">
                    <!-- Task rows will be populated dynamically -->
                </tbody>
            </table>

            <!-- Pagination Controls -->
            <div class="pagination-container">
                <button id="next-page-btn" class="pagination-btn" disabled>&gt;</button>
                <button id="prev-page-btn" class="pagination-btn">&lt;</button>
                <span id="page-info"></span>
            </div>
        </div>

        <!-- Add Task Modal -->
        <div id="add-task-modal" class="modal">
            <div class="modal-content">
                <span id="close-add-task-modal" class="close-btn">×</span>
                <section id="addadd">New Task</section>
                <ul id="new-task-list" class="task-list"></ul>
                <section id="border"></section>
                <section id="add">Add New Task</section>
                <div class="task-input-container">
                    <input type="text" id="new-task-input">
                    <button id="add-task-btn" class="add-task-btn"> + Add Task</button>
                </div>
                <button id="save-tasks-btn" class="save-btn" disabled>Save</button>
            </div>
        </div>

        <!-- Edit Task Modal -->
        <div id="edit-task-modal" class="modal">
            <div class="modal-content">
                <span id="close-edit-task-modal" class="close-btn">×</span>
                <section id="addadd">Subtask</section>
                <ul id="subtask-list" class="task-list"></ul>
                <section id="border"></section>
                <section id="add">Add Subtask</section>
                <div class="task-input-container">
                    <input type="text" id="new-subtask-input">
                    <button id="add-subtask-btn" class="add-task-btn"> + Add Subtask</button>
                </div>
                <button id="save-subtasks-btn" class="save-btn" disabled>Save</button>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="delete-confirmation-modal" class="modal">
            <div class="modal-content">
                <h2>Are you sure you want to delete this task?</h2>
                <p id="delete-confirmation-message"></p>
                <button id="confirm-delete-btn" class="dell1-user-btn">Yes, delete</button>
                <button id="cancel-delete-btn" class="dell-user-btn">Cancel</button>
            </div>
        </div>

        <!-- Assign Task to Crop Type Modal -->
        <div id="assign-task-modal" class="modal">
            <div class="modal-content">
                <section id="addadd">Assign Task</section>
                <label for="crop-type-select">Select Crop Type</label>
                <select id="crop-type-select">
                    <option value="">Crop Type</option>
                    <!-- Crop types will be loaded dynamically -->
                </select>
                <section id="border"></section>
                <section id="taskselect">Task Selection</section>
                <div id="task-checkboxes">
                    <!-- Default tasks will be loaded dynamically as checkboxes -->
                </div>
                <div class="button-container">
                    <button id="close-assign-task-modal" class="close-btn-assign">Cancel</button>
                    <button id="assign-tasks-btn" class="add-user-btn">Save</button>
                </div>
            </div>
        </div>

        <div class="title">ASSIGNED TASK</div>
        <!-- Assigned Tasks Table -->
        <div class="panel">
            <div class="btn-container">
                <button id="open-assign-task-modal" class="text-add-btn"> + Assign Tasks to Crop Type</button>
            </div>
            <div class="search-container">
                <label for="crop-filter"></label>
                <select id="crop-filter">
                    <option value="">Crops</option>
                </select>
                <label for="crop-type-filter"></label>
                <select id="crop-type-filter">
                    <option value="">Crop Type</option>
                </select>
            </div>
        <div class="table-container">
             <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Crop Name</th>
                        <th>Crop Type</th>
                        <th>Task Name</th>
                        <th>Assigned On</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="assigned-tasks-table-body">
                    <!-- Task rows will be populated dynamically -->
                </tbody>
             </table>
        </div>
            <!-- Pagination Controls for Assigned Tasks -->
            <div class="pagination-container">
                <button id="assigned-next-page-btn" class="pagination-btn" disabled>&gt;</button>
                <button id="assigned-prev-page-btn" class="pagination-btn" disabled>&lt;</button>
                <span id="assigned-page-info"></span>
            </div>
        </div>

        <!-- Edit Subtasks Modal -->
        <div id="edit-subtasks-modal" class="modal">
            <div class="modal-content">
                <span class="close" id="close-edit-subtasks-modal">×</span>
                <p id="edit-task-name-display"></p>
                <ul id="subtask-list-subtasks" class="task-list"></ul>
                <section id="border"></section>
                <section id="add">Add Subtask</section>
                <div class="task-input-container">
                    <input type="text" id="new-subtask-input-subtasks">
                    <button id="add-subtask-btn-subtasks" class="add-task-btn"> + Add Subtask</button>
                </div>
                <button id="save-subtasks-btn-subtasks" class="save-btn">Save</button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/js/admin/predefined_task.js"></script>
    <!-- Import the reusable script from src/auth -->
    <script type="module" src="/src/auth/header.js"></script>
</body>

</html>